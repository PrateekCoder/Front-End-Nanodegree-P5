(function(){var n,e,t,i,o,r,a;i=function(n,e){var t,i,o,r;o=[];for(i in e.prototype)try{r=e.prototype[i],null==n[i]&&"function"!=typeof r?o.push(n[i]=r):o.push(void 0)}catch(a){t=a}return o},n={},null==n.options&&(n.options={}),t={checks:{xhr:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())},timeout:5e3},image:{url:function(){return"/favicon.ico?_="+Math.floor(1e9*Math.random())}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},o=function(n,e){var t,i,o,r,a,l;for(t=n,l=e.split("."),i=o=0,r=l.length;r>o&&(a=l[i],t=t[a],"object"==typeof t);i=++o);return i===l.length-1?t:void 0},n.getOption=function(e){var i,r;return r=null!=(i=o(n.options,e))?i:o(t,e),"function"==typeof r?r():r},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(n.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return n.confirmDown()},!1),n.state="up",n.markUp=function(){return n.trigger("confirmed-up"),"up"!==n.state?(n.state="up",n.trigger("up")):void 0},n.markDown=function(){return n.trigger("confirmed-down"),"down"!==n.state?(n.state="down",n.trigger("down")):void 0},r={},n.on=function(e,t,i){var o,a,l,u,c;if(a=e.split(" "),a.length>1){for(c=[],l=0,u=a.length;u>l;l++)o=a[l],c.push(n.on(o,t,i));return c}return null==r[e]&&(r[e]=[]),r[e].push([i,t])},n.off=function(n,e){var t,i,o,a,l;if(null!=r[n]){if(e){for(o=0,l=[];o<r[n].length;)a=r[n][o],i=a[0],t=a[1],t===e?l.push(r[n].splice(o,1)):l.push(o++);return l}return r[n]=[]}},n.trigger=function(n){var e,t,i,o,a,l,u;if(null!=r[n]){for(a=r[n],u=[],i=0,o=a.length;o>i;i++)l=a[i],e=l[0],t=l[1],u.push(t.call(e));return u}},e=function(n,e,t){var i,o,r,a,l;return l=function(){return n.status&&n.status<12e3?e():t()},null===n.onprogress?(i=n.onerror,n.onerror=function(){return t(),"function"==typeof i?i.apply(null,arguments):void 0},a=n.ontimeout,n.ontimeout=function(){return t(),"function"==typeof a?a.apply(null,arguments):void 0},o=n.onload,n.onload=function(){return l(),"function"==typeof o?o.apply(null,arguments):void 0}):(r=n.onreadystatechange,n.onreadystatechange=function(){return 4===n.readyState?l():0===n.readyState&&t(),"function"==typeof r?r.apply(null,arguments):void 0})},n.checks={},n.checks.xhr=function(){var t,i;i=new XMLHttpRequest,i.offline=!1,i.open("HEAD",n.getOption("checks.xhr.url"),!0),null!=i.timeout&&(i.timeout=n.getOption("checks.xhr.timeout")),e(i,n.markUp,n.markDown);try{i.send()}catch(o){t=o,n.markDown()}return i},n.checks.image=function(){var e;return e=document.createElement("img"),e.onerror=n.markDown,e.onload=n.markUp,void(e.src=n.getOption("checks.image.url"))},n.checks.down=n.markDown,n.checks.up=n.markUp,n.check=function(){return n.trigger("checking"),n.checks[n.getOption("checks.active")]()},n.confirmUp=n.confirmDown=n.check,n.onXHR=function(n){var e,t,o;return o=function(e,t){var i;return i=e.open,e.open=function(o,r,a,l,u){return n({type:o,url:r,async:a,flags:t,user:l,password:u,xhr:e}),i.apply(e,arguments)}},t=window.XMLHttpRequest,window.XMLHttpRequest=function(n){var e,i,r;return r=new t(n),o(r,n),i=r.setRequestHeader,r.headers={},r.setRequestHeader=function(n,e){return r.headers[n]=e,i.call(r,n,e)},e=r.overrideMimeType,r.overrideMimeType=function(n){return r.mimeType=n,e.call(r,n)},r},i(window.XMLHttpRequest,t),null!=window.XDomainRequest?(e=window.XDomainRequest,window.XDomainRequest=function(){var n;return n=new e,o(n),n},i(window.XDomainRequest,e)):void 0},a=function(){return n.getOption("interceptRequests")&&n.onXHR(function(t){var i;return i=t.xhr,i.offline!==!1?e(i,n.markUp,n.confirmDown):void 0}),n.getOption("checkOnLoad")?n.check():void 0},setTimeout(a,0),window.Offline=n}).call(this),function(){var n,e,t,i,o,r,a,l,u;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");i=Offline.reconnect={},r=null,o=function(){var n;return null!=i.state&&"inactive"!==i.state&&Offline.trigger("reconnect:stopped"),i.state="inactive",i.remaining=i.delay=null!=(n=Offline.getOption("reconnect.initialDelay"))?n:3},e=function(){var n,e;return n=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*i.delay),3600),i.remaining=i.delay=n},a=function(){return"connecting"!==i.state?(i.remaining-=1,Offline.trigger("reconnect:tick"),0===i.remaining?l():void 0):void 0},l=function(){return"waiting"===i.state?(Offline.trigger("reconnect:connecting"),i.state="connecting",Offline.check()):void 0},n=function(){return Offline.getOption("reconnect")?(o(),i.state="waiting",Offline.trigger("reconnect:started"),r=setInterval(a,1e3)):void 0},u=function(){return null!=r&&clearInterval(r),o()},t=function(){return Offline.getOption("reconnect")&&"connecting"===i.state?(Offline.trigger("reconnect:failure"),i.state="waiting",e()):void 0},i.tryNow=l,o(),Offline.on("down",n),Offline.on("confirmed-down",t),Offline.on("up",u)}.call(this),function(){var n,e,t,i,o,r;if(!window.Offline)throw new Error("Requests module brought in without offline.js");t=[],r=!1,i=function(n){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(r=!0),t.push(n)},o=function(n){var e,t,i,o,r,a,l,u,c;c=n.xhr,a=n.url,r=n.type,l=n.user,i=n.password,e=n.body,c.abort(),c.open(r,a,!0,l,i),o=c.headers;for(t in o)u=o[t],c.setRequestHeader(t,u);return c.mimeType&&c.overrideMimeType(c.mimeType),c.send(e)},n=function(){return t=[]},e=function(){var e,i,r,a,l,u;for(Offline.trigger("requests:flush"),l={},e=0,r=t.length;r>e;e++)a=t[e],u=a.url.replace(/(\?|&)_=[0-9]+/,function(n,e){return"?"===e?e:""}),l[a.type.toUpperCase()+" - "+u]=a;for(i in l)a=l[i],o(a);return n()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return r?(r=!1,n()):void 0}),Offline.on("up",e),Offline.on("down",function(){return r=!1}),Offline.onXHR(function(n){var e,t,o,r,a;return a=n.xhr,o=n.async,a.offline!==!1&&(r=function(){return i(n)},t=a.send,a.send=function(e){return n.body=e,t.apply(a,arguments)},o)?null===a.onprogress?(a.addEventListener("error",r,!1),a.addEventListener("timeout",r,!1)):(e=a.onreadystatechange,a.onreadystatechange=function(){return 0===a.readyState?r():4===a.readyState&&(0===a.status||a.status>=12e3)&&r(),"function"==typeof e?e.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:e,clear:n}):void 0},0)}.call(this),function(){var n,e,t,i,o;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(i=["up","down"],e=0,t=i.length;t>e;e++)o=i[e],(document.querySelector("script[data-simulate='"+o+"']")||localStorage.OFFLINE_SIMULATE===o)&&(null==Offline.options&&(Offline.options={}),null==(n=Offline.options).checks&&(n.checks={}),Offline.options.checks.active=o)}.call(this),function(){var n,e,t,i,o,r,a,l,u,c,f,s,d;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");e='<div class="offline-ui"><div class="offline-ui-content"></div></div>',n='<a href class="offline-ui-retry"></a>',r=function(n){var e;return e=document.createElement("div"),e.innerHTML=n,e.children[0]},a=o=null,i=function(n){return f(n),a.className+=" "+n},f=function(n){return a.className=a.className.replace(new RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")},u={},l=function(n,e){return i(n),null!=u[n]&&clearTimeout(u[n]),u[n]=setTimeout(function(){return f(n),delete u[n]},1e3*e)},d=function(n){var e,t,i,o;i={day:86400,hour:3600,minute:60,second:1};for(t in i)if(e=i[t],n>=e)return o=Math.floor(n/e),[o,t];return["now",""]},s=function(){var t,l;return a=r(e),document.body.appendChild(a),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(a.appendChild(r(n)),t=a.querySelector(".offline-ui-retry"),l=function(n){return n.preventDefault(),Offline.reconnect.tryNow()},null!=t.addEventListener?t.addEventListener("click",l,!1):t.attachEvent("click",l)),i("offline-ui-"+Offline.state),o=a.querySelector(".offline-ui-content")},c=function(){return s(),Offline.on("up",function(){return f("offline-ui-down"),i("offline-ui-up"),l("offline-ui-up-2s",2),l("offline-ui-up-5s",5)}),Offline.on("down",function(){return f("offline-ui-up"),i("offline-ui-down"),l("offline-ui-down-2s",2),l("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return i("offline-ui-connecting"),f("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var n,e,t;return i("offline-ui-waiting"),f("offline-ui-connecting"),n=d(Offline.reconnect.remaining),e=n[0],t=n[1],o.setAttribute("data-retry-in-value",e),o.setAttribute("data-retry-in-unit",t)}),Offline.on("reconnect:stopped",function(){return f("offline-ui-connecting offline-ui-waiting"),o.setAttribute("data-retry-in-value",null),o.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return l("offline-ui-reconnect-failed-2s",2),l("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return l("offline-ui-reconnect-succeeded-2s",2),l("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?c():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",c,!1):(t=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&c(),"function"==typeof t?t.apply(null,arguments):void 0})}.call(this);var iniplaces=[{name:"Select CityWalk",lat:28.5285479,"long":77.2194538,description:"One of the best Malls in Delhi"},{name:"DLF Ambience Mall",lat:28.5057298,"long":77.0962621,description:"This is one of the Asia's biggest Malls"},{name:"The Great India Place",lat:28.567624,"long":77.3261979,description:" This is again a very good mall to visit in Delhi NCR "},{name:"Cannaught Place",lat:28.6314512,"long":77.2166672,description:"This is one of the center of attraction to visit in Delhi."},{name:"Lal Qila",lat:28.6558126,"long":77.2419522,description:"Historical Monument to visit in Delhi."},{name:"Red Fort",lat:28.6561592,"long":77.2410203,description:"Historical Monument to visit in Delhi."},{name:"Lotus Temple",lat:28.553492,"long":77.2588264,description:"A peaceful and beautiful Place to visit."},{name:"Garden of five senses",lat:28.513935,"long":77.196918,description:"Beautiful Place to spend time with loved once."},{name:"AksharDham Mandir",lat:28.6180024,"long":77.2793719,description:"The best place to get peace of mind."},{name:"India Gate",lat:28.6109401,"long":77.234482,description:"Built in the memories of Indian War Heroes. A must visit Place."},{name:"National Meuseum",lat:28.6117993,"long":77.2194934,description:"Meuseumm to learn about India."},{name:"Jawaharlal Nehru Stadium",lat:28.5828456,"long":77.2343665,description:"A world class Sports Stadium."},{name:"GymKhana Club",lat:28.5983359,"long":77.2048893,description:"Best Gym you can find in Delhi."}];ko.bindingHandlers.preventBubble={init:function(n,e){var t=ko.utils.unwrapObservable(e());ko.utils.registerEventHandler(n,t,function(n){n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()})}};var ViewModel=function(){function n(){var n={disableDefaultUI:!0};e=new google.maps.Map($("#map-canvas")[0],n),o=new google.maps.InfoWindow,$.getJSON(f,function(n){t=n.results[0].geometry.bounds,i=new google.maps.LatLngBounds(new google.maps.LatLng(t.southwest.lat,t.southwest.lng),new google.maps.LatLng(t.northeast.lat,t.northeast.lng)),e.fitBounds(i),e.setZoom(11)})}var e,t,i,o,r=this,a=ko.observable("New Delhi"),l=[],u="https://maps.googleapis.com/maps/api/geocode/json?address=",c="key=AIzaSyAiVoNw54-8R0okGj5Zc9BZzsn98No-efU",f=u+a()+"&"+c;r.listDisplayed=ko.observable(!0),r.query=ko.observable(""),r.articleList=ko.observableArray([]);var s=function(n,e,t,i){function o(n,e){var t=this;t.content=n,t.url=e}function a(){var e="http://en.wikipedia.org/w/api.php?action=opensearch&search="+n.name+"&format=json&callback=wikiCallback",t=setTimeout(function(){$wikiData.text("Failed to get Wikipedia resources")},5e3);$.ajax({url:e,dataType:"jsonp",success:function(n){r.articleList.removeAll();for(var e=n[1],i=0;i<e.length;i++){articleStr=e[i];var a="http://en.wikipedia.org/wiki/"+articleStr;r.articleList.push(new o(articleStr,a))}clearTimeout(t)}})}function l(n){var e="<ol>\n";e+="<h1>Wikipedia Articles</h1>",0===n.length&&(e="No Wikipedia article found");for(var t=0;t<n.length;t++){var i=n[t].content,o=n[t].url;e+=n[t].error?'<h5 style="color: red">'+i+"</h5>":'<li><a href="'+o+'">'+i+"</a></li>\n"}return e+="</ol>"}this.name=n.name,this.lat=n.lat,this["long"]=n["long"],name_string=String(n.name);var u=new google.maps.Marker({position:new google.maps.LatLng(n.lat,n["long"]),title:name_string,animation:google.maps.Animation.DROP,map:e});google.maps.event.addListener(u,"click",function(){a(),e.panTo(u.position),window.setTimeout(function(){"up"===Offline.state&&i.setContent("You're now offline :("),i.setContent(l(r.articleList())),i.open(e,u)},500)}),t.push(u)};n(),r.clickMarker=function(n){var e=n.name;for(var t in l)l[t].title===e&&google.maps.event.trigger(l[t],"click")},window.addEventListener("resize",function(n){e.fitBounds(i),$("#map-canvas").height($(window).height())}),r.expandSearch=function(){r.listDisplayed()?r.listDisplayed(!1):r.listDisplayed(!0)},r.placeList=ko.observableArray([]),iniplaces.forEach(function(n){r.placeList.push(new s(n,e,l,o))}),r.search=function(n){r.placeList.removeAll();for(var t in l)l[t].setMap(null);for(var i in iniplaces)iniplaces[i].name.toLowerCase().indexOf(n.toLowerCase())>=0&&r.placeList.push(new s(iniplaces[i],e,l,o))},r.query.subscribe(r.search)};ko.applyBindings(new ViewModel);
